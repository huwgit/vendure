{"version":3,"file":"730.8943275dbb543db2.js","mappings":"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","names":["PromotionDetailComponent_button_10_Template","rf","ctx","_r11","i0","ctx_r10","create","ctx_r0","saveButtonEnabled","PromotionDetailComponent_ng_template_12_button_0_Template","_r14","ctx_r13","save","ctx_r12","PromotionDetailComponent_ng_template_12_Template","PromotionDetailComponent_vdr_card_17_Template","PromotionDetailComponent_vdr_card_18_Template","entity_r15","ngIf","PromotionDetailComponent_vdr_card_50_Template","ctx_r5","customFields","detailForm","get","PromotionDetailComponent_div_54_Template","_r19","$event","ctx_r18","removeCondition","condition_r16","$implicit","i_r17","index","ctx_r6","getConditionDefinition","PromotionDetailComponent_vdr_dropdown_56_button_6_Template","_r23","condition_r21","ctx_r22","addCondition","description","PromotionDetailComponent_vdr_dropdown_56_Template","ctx_r7","getAvailableConditions","PromotionDetailComponent_div_59_Template","_r27","ctx_r26","removeAction","action_r24","i_r25","ctx_r8","getActionDefinition","PromotionDetailComponent_vdr_dropdown_61_button_6_Template","_r31","action_r29","ctx_r30","addAction","PromotionDetailComponent_vdr_dropdown_61_Template","ctx_r9","getAvailableActions","_c0","PromotionListComponent_a_8_Template","PromotionListComponent_ng_template_19_Template","promotion_r12","item","id","PromotionListComponent_ng_template_22_Template","promotion_r13","createdAt","PromotionListComponent_ng_template_25_Template","promotion_r14","updatedAt","_c1","a1","PromotionListComponent_ng_template_28_Template","promotion_r15","name","PromotionListComponent_ng_template_31_vdr_chip_0_Template","PromotionListComponent_ng_template_31_vdr_chip_1_Template","PromotionListComponent_ng_template_31_Template","promotion_r16","enabled","PromotionListComponent_ng_template_34_Template","promotion_r19","couponCode","PromotionListComponent_ng_template_37_Template","promotion_r20","startsAt","PromotionListComponent_ng_template_40_Template","promotion_r21","endsAt","PromotionListComponent_ng_template_43_Template","promotion_r22","perCustomerUsageLimit","PromotionListComponent_ng_template_46_Template","promotion_r23","usageLimit","PromotionListComponent_vdr_dt2_custom_field_column_47_Template","customField_r24","ctx_r11","sorts","GET_PROMOTION_DETAIL","gql","PROMOTION_FRAGMENT","PromotionDetailComponent","TypedBaseDetailComponent","constructor","changeDetector","dataService","formBuilder","notificationService","super","this","getCustomFieldConfig","group","Validators","required","conditions","array","actions","getCustomFieldsDefaults","allConditions","allActions","ngOnInit","init","promotion","getPromotionActionsAndConditions","single$","subscribe","data","promotionActions","promotionConditions","markForCheck","ngOnDestroy","destroy","filter","o","find","c","code","condition","a","action","dirty","valid","length","value","addOperation","markAsDirty","removeOperation","formArrayOf","key","input","getUpdatedPromotion","translations","languageCode","createPromotion","__typename","success","marker","entity","markAsPristine","router","navigate","relativeTo","route","error","message","err","combineLatest","entity$","languageCode$","pipe","take","mergeMap","paymentMethod","updatePromotion","formGroup","formValue","createUpdatedTranslatable","translatable","updatedFields","customFieldConfig","defaultTranslation","mapOperationsToInputs","setFormValues","currentTranslation","findTranslation","patchValue","forEach","setCustomFieldFormValues","operations","formValueOperations","map","i","arguments","Object","values","args","j","encodeConfigArgValue","operation","operationsArray","collection","findIndex","argsHash","reduce","output","arg","getConfigArgValue","getDefaultArgValue","push","control","argName","def","argDef","getDefaultConfigArgValue","Error","removeAt","splice","static","ɵfac","t","i1","i2","ɵcmp","type","selectors","features","decls","vars","consts","template","setLanguage","_r1","isNew$","availableLanguages$","dependencies","i3","i4","i5","styles","changeDetection","deletePromotionsBulkAction","createBulkDeleteAction","location","requiresPermission","Permission","DeletePromotion","getItemName","bulkDelete","ids","deletePromotions","res","assignPromotionsToChannelBulkAction","createBulkAssignToChannelAction","UpdatePromotion","bulkAssignToChannel","promotionIds","channelId","mutate","AssignPromotionsToChannelDocument","assignPromotionsToChannel","removePromotionsFromChannelBulkAction","createBulkRemoveFromChannelAction","DeleteCatalog","bulkRemoveFromChannel","RemovePromotionsFromChannelDocument","removePromotionsFromChannel","GET_PROMOTION_LIST","PromotionListComponent","TypedBaseListComponent","filters","createFilterCollection","addIdFilter","addDateFilters","addFilters","kind","label","filterField","addCustomFieldFilters","connectToRoute","createSortCollection","defaultSort","addSorts","addCustomFieldSorts","configure","document","GetPromotionListDocument","getItems","promotions","setVariables","skip","createQueryOptions","searchTermControl","refreshListOnChanges","valueChanges","searchTerm","createFilterInput","sort","createSortInput","filterOperator","LogicalOperator","AND","contains","OR","options","setPageNumber","setItemsPerPage","contentLanguage$","items$","itemsPerPage$","totalItems$","currentPage$","selectionManager","i3$1","createRoutes","pageService","path","component","PageComponent","locationId","breadcrumb","children","getPageTabRoutes","link","promotionBreadcrumb","params","detailBreadcrumb","breadcrumbKey","getName","MarketingModule","hasRegisteredTabsAndBulkActions","bulkActionRegistryService","registerBulkAction","registerPageTab","priority","tab","detailComponentWithResolver","query","GetPromotionDetailDocument","entityKey","getBreadcrumbs","ɵmod","ɵinj","providers","provide","ROUTES","useFactory","multi","deps","PageService","imports","SharedModule","RouterModule","forChild"],"sourceRoot":"webpack:///","sources":["../node_modules/@vendure/admin-ui/fesm2022/vendure-admin-ui-marketing.mjs"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { Component, ChangeDetectionStrategy, NgModule } from '@angular/core';\nimport * as i2 from '@angular/forms';\nimport { Validators } from '@angular/forms';\nimport { marker } from '@biesbjerg/ngx-translate-extract-marker';\nimport * as i1 from '@vendure/admin-ui/core';\nimport { PROMOTION_FRAGMENT, TypedBaseDetailComponent, getCustomFieldsDefaults, createUpdatedTranslatable, findTranslation, encodeConfigArgValue, getConfigArgValue, getDefaultConfigArgValue, createBulkDeleteAction, Permission, createBulkAssignToChannelAction, AssignPromotionsToChannelDocument, createBulkRemoveFromChannelAction, RemovePromotionsFromChannelDocument, TypedBaseListComponent, GetPromotionListDocument, LogicalOperator, PageComponent, detailBreadcrumb, detailComponentWithResolver, GetPromotionDetailDocument, SharedModule, PageService } from '@vendure/admin-ui/core';\nimport { gql } from 'apollo-angular';\nimport { combineLatest } from 'rxjs';\nimport { take, mergeMap, map } from 'rxjs/operators';\nimport * as i3 from '@clr/angular';\nimport * as i4 from '@angular/common';\nimport { AsyncPipe } from '@angular/common';\nimport * as i5 from '@ngx-translate/core';\nimport * as i3$1 from '@angular/router';\nimport { ROUTES, RouterModule } from '@angular/router';\n\nconst GET_PROMOTION_DETAIL = gql `\n    query GetPromotionDetail($id: ID!) {\n        promotion(id: $id) {\n            ...Promotion\n        }\n    }\n    ${PROMOTION_FRAGMENT}\n`;\r\nclass PromotionDetailComponent extends TypedBaseDetailComponent {\r\n    constructor(changeDetector, dataService, formBuilder, notificationService) {\r\n        super();\r\n        this.changeDetector = changeDetector;\r\n        this.dataService = dataService;\r\n        this.formBuilder = formBuilder;\r\n        this.notificationService = notificationService;\r\n        this.customFields = this.getCustomFieldConfig('Promotion');\r\n        this.detailForm = this.formBuilder.group({\r\n            name: ['', Validators.required],\r\n            description: '',\r\n            enabled: true,\r\n            couponCode: null,\r\n            perCustomerUsageLimit: null,\r\n            usageLimit: null,\r\n            startsAt: null,\r\n            endsAt: null,\r\n            conditions: this.formBuilder.array([]),\r\n            actions: this.formBuilder.array([]),\r\n            customFields: this.formBuilder.group(getCustomFieldsDefaults(this.customFields)),\r\n        });\r\n        this.conditions = [];\r\n        this.actions = [];\r\n        this.allConditions = [];\r\n        this.allActions = [];\r\n        this.customFields = this.getCustomFieldConfig('Promotion');\r\n    }\r\n    ngOnInit() {\r\n        this.init();\r\n        this.dataService.promotion.getPromotionActionsAndConditions().single$.subscribe(data => {\r\n            this.allActions = data.promotionActions;\r\n            this.allConditions = data.promotionConditions;\r\n            this.changeDetector.markForCheck();\r\n        });\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy();\r\n    }\r\n    getAvailableConditions() {\r\n        return this.allConditions.filter(o => !this.conditions.find(c => c.code === o.code));\r\n    }\r\n    getConditionDefinition(condition) {\r\n        return this.allConditions.find(c => c.code === condition.code);\r\n    }\r\n    getAvailableActions() {\r\n        return this.allActions.filter(o => !this.actions.find(a => a.code === o.code));\r\n    }\r\n    getActionDefinition(action) {\r\n        return this.allActions.find(c => c.code === action.code);\r\n    }\r\n    saveButtonEnabled() {\r\n        return !!(this.detailForm.dirty &&\r\n            this.detailForm.valid &&\r\n            (this.conditions.length !== 0 || this.detailForm.value.couponCode) &&\r\n            this.actions.length !== 0);\r\n    }\r\n    addCondition(condition) {\r\n        this.addOperation('conditions', condition);\r\n        this.detailForm.markAsDirty();\r\n    }\r\n    addAction(action) {\r\n        this.addOperation('actions', action);\r\n        this.detailForm.markAsDirty();\r\n    }\r\n    removeCondition(condition) {\r\n        this.removeOperation('conditions', condition);\r\n        this.detailForm.markAsDirty();\r\n    }\r\n    removeAction(action) {\r\n        this.removeOperation('actions', action);\r\n        this.detailForm.markAsDirty();\r\n    }\r\n    formArrayOf(key) {\r\n        return this.detailForm.get(key);\r\n    }\r\n    create() {\r\n        if (!this.detailForm.dirty) {\r\n            return;\r\n        }\r\n        const input = this.getUpdatedPromotion({\r\n            id: '',\r\n            createdAt: '',\r\n            updatedAt: '',\r\n            startsAt: '',\r\n            endsAt: '',\r\n            name: '',\r\n            description: '',\r\n            couponCode: null,\r\n            perCustomerUsageLimit: null,\r\n            usageLimit: null,\r\n            enabled: false,\r\n            conditions: [],\r\n            actions: [],\r\n            translations: [],\r\n        }, this.detailForm, this.languageCode);\r\n        this.dataService.promotion.createPromotion(input).subscribe(({ createPromotion }) => {\r\n            switch (createPromotion.__typename) {\r\n                case 'Promotion':\r\n                    this.notificationService.success(marker('common.notify-create-success'), {\r\n                        entity: 'Promotion',\r\n                    });\r\n                    this.detailForm.markAsPristine();\r\n                    this.changeDetector.markForCheck();\r\n                    this.router.navigate(['../', createPromotion.id], { relativeTo: this.route });\r\n                    break;\r\n                case 'MissingConditionsError':\r\n                    this.notificationService.error(createPromotion.message);\r\n                    break;\r\n            }\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-create-error'), {\r\n                entity: 'Promotion',\r\n            });\r\n        });\r\n    }\r\n    save() {\r\n        if (!this.detailForm.dirty) {\r\n            return;\r\n        }\r\n        combineLatest(this.entity$, this.languageCode$)\r\n            .pipe(take(1), mergeMap(([paymentMethod, languageCode]) => {\r\n            const input = this.getUpdatedPromotion(paymentMethod, this.detailForm, languageCode);\r\n            return this.dataService.promotion.updatePromotion(input);\r\n        }))\r\n            .subscribe(data => {\r\n            this.notificationService.success(marker('common.notify-update-success'), {\r\n                entity: 'Promotion',\r\n            });\r\n            this.detailForm.markAsPristine();\r\n            this.changeDetector.markForCheck();\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-update-error'), {\r\n                entity: 'Promotion',\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * Given a PaymentMethod and the value of the detailForm, this method creates an updated copy of it which\r\n     * can then be persisted to the API.\r\n     */\r\n    getUpdatedPromotion(promotion, formGroup, languageCode) {\r\n        const formValue = formGroup.value;\r\n        const input = createUpdatedTranslatable({\r\n            translatable: promotion,\r\n            updatedFields: formValue,\r\n            customFieldConfig: this.customFields,\r\n            languageCode,\r\n            defaultTranslation: {\r\n                languageCode,\r\n                name: promotion.name || '',\r\n                description: promotion.description || '',\r\n            },\r\n        });\r\n        return {\r\n            ...input,\r\n            conditions: this.mapOperationsToInputs(this.conditions, formValue.conditions),\r\n            actions: this.mapOperationsToInputs(this.actions, formValue.actions),\r\n        };\r\n    }\r\n    /**\r\n     * Update the form values when the entity changes.\r\n     */\r\n    setFormValues(entity, languageCode) {\r\n        const currentTranslation = findTranslation(entity, languageCode);\r\n        this.detailForm.patchValue({\r\n            name: currentTranslation?.name,\r\n            description: currentTranslation?.description,\r\n            enabled: entity.enabled,\r\n            couponCode: entity.couponCode,\r\n            perCustomerUsageLimit: entity.perCustomerUsageLimit,\r\n            usageLimit: entity.usageLimit,\r\n            startsAt: entity.startsAt,\r\n            endsAt: entity.endsAt,\r\n        });\r\n        entity.conditions.forEach(o => {\r\n            this.addOperation('conditions', o);\r\n        });\r\n        entity.actions.forEach(o => this.addOperation('actions', o));\r\n        if (this.customFields.length) {\r\n            this.setCustomFieldFormValues(this.customFields, this.detailForm.get('customFields'), entity, currentTranslation);\r\n        }\r\n    }\r\n    /**\r\n     * Maps an array of conditions or actions to the input format expected by the GraphQL API.\r\n     */\r\n    mapOperationsToInputs(operations, formValueOperations) {\r\n        return operations.map((o, i) => ({\r\n            code: o.code,\r\n            arguments: Object.values(formValueOperations[i].args).map((value, j) => ({\r\n                name: o.args[j].name,\r\n                value: encodeConfigArgValue(value),\r\n            })),\r\n        }));\r\n    }\r\n    /**\r\n     * Adds a new condition or action to the promotion.\r\n     */\r\n    addOperation(key, operation) {\r\n        const operationsArray = this.formArrayOf(key);\r\n        const collection = key === 'conditions' ? this.conditions : this.actions;\r\n        const index = operationsArray.value.findIndex(o => o.code === operation.code);\r\n        if (index === -1) {\r\n            const argsHash = operation.args.reduce((output, arg) => ({\r\n                ...output,\r\n                [arg.name]: getConfigArgValue(arg.value) ?? this.getDefaultArgValue(key, operation, arg.name),\r\n            }), {});\r\n            operationsArray.push(this.formBuilder.control({\r\n                code: operation.code,\r\n                args: argsHash,\r\n            }));\r\n            collection.push({\r\n                code: operation.code,\r\n                args: operation.args.map(a => ({ name: a.name, value: getConfigArgValue(a.value) })),\r\n            });\r\n        }\r\n    }\r\n    getDefaultArgValue(key, operation, argName) {\r\n        const def = key === 'conditions'\r\n            ? this.allConditions.find(c => c.code === operation.code)\r\n            : this.allActions.find(a => a.code === operation.code);\r\n        if (def) {\r\n            const argDef = def.args.find(a => a.name === argName);\r\n            if (argDef) {\r\n                return getDefaultConfigArgValue(argDef);\r\n            }\r\n        }\r\n        throw new Error(`Could not determine default value for \"argName\"`);\r\n    }\r\n    /**\r\n     * Removes a condition or action from the promotion.\r\n     */\r\n    removeOperation(key, operation) {\r\n        const operationsArray = this.formArrayOf(key);\r\n        const collection = key === 'conditions' ? this.conditions : this.actions;\r\n        const index = operationsArray.value.findIndex(o => o.code === operation.code);\r\n        if (index !== -1) {\r\n            operationsArray.removeAt(index);\r\n            collection.splice(index, 1);\r\n        }\r\n    }\r\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.2\", ngImport: i0, type: PromotionDetailComponent, deps: [{ token: i0.ChangeDetectorRef }, { token: i1.DataService }, { token: i2.FormBuilder }, { token: i1.NotificationService }], target: i0.ɵɵFactoryTarget.Component }); }\r\n    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"16.2.2\", type: PromotionDetailComponent, selector: \"vdr-promotion-detail\", usesInheritance: true, ngImport: i0, template: \"<vdr-page-block>\\r\\n    <vdr-action-bar>\\r\\n        <vdr-ab-left>\\r\\n            <div class=\\\"flex clr-align-items-center\\\">\\r\\n                <vdr-language-selector\\r\\n                    [disabled]=\\\"isNew$ | async\\\"\\r\\n                    [availableLanguageCodes]=\\\"availableLanguages$ | async\\\"\\r\\n                    [currentLanguageCode]=\\\"languageCode$ | async\\\"\\r\\n                    (languageCodeChange)=\\\"setLanguage($event)\\\"\\r\\n                ></vdr-language-selector>\\r\\n            </div>\\r\\n        </vdr-ab-left>\\r\\n\\r\\n        <vdr-ab-right>\\r\\n            <vdr-action-bar-items locationId=\\\"promotion-detail\\\"></vdr-action-bar-items>\\r\\n            <button\\r\\n                class=\\\"btn btn-primary\\\"\\r\\n                *ngIf=\\\"isNew$ | async; else updateButton\\\"\\r\\n                (click)=\\\"create()\\\"\\r\\n                [disabled]=\\\"!saveButtonEnabled()\\\"\\r\\n            >\\r\\n                {{ 'common.create' | translate }}\\r\\n            </button>\\r\\n            <ng-template #updateButton>\\r\\n                <button\\r\\n                    class=\\\"btn btn-primary\\\"\\r\\n                    (click)=\\\"save()\\\"\\r\\n                    *vdrIfPermissions=\\\"'UpdatePromotion'\\\"\\r\\n                    [disabled]=\\\"!saveButtonEnabled()\\\"\\r\\n                >\\r\\n                    {{ 'common.update' | translate }}\\r\\n                </button>\\r\\n            </ng-template>\\r\\n        </vdr-ab-right>\\r\\n    </vdr-action-bar>\\r\\n</vdr-page-block>\\r\\n\\r\\n<form class=\\\"form\\\" [formGroup]=\\\"detailForm\\\">\\r\\n    <vdr-page-detail-layout>\\r\\n        <vdr-page-detail-sidebar>\\r\\n            <vdr-card *vdrIfPermissions=\\\"'UpdatePromotion'\\\">\\r\\n                <clr-toggle-wrapper>\\r\\n                    <input type=\\\"checkbox\\\" clrToggle name=\\\"enabled\\\" formControlName=\\\"enabled\\\" />\\r\\n                    <label>{{ 'common.enabled' | translate }}</label>\\r\\n                </clr-toggle-wrapper>\\r\\n            </vdr-card>\\r\\n            <vdr-card *ngIf=\\\"entity$ | async as entity\\\">\\r\\n                <vdr-page-entity-info [entity]=\\\"entity\\\" />\\r\\n            </vdr-card>\\r\\n        </vdr-page-detail-sidebar>\\r\\n        <vdr-page-block>\\r\\n            <vdr-card>\\r\\n                <div class=\\\"form-grid\\\">\\r\\n                    <vdr-form-field [label]=\\\"'common.name' | translate\\\" for=\\\"name\\\">\\r\\n                        <input\\r\\n                            id=\\\"name\\\"\\r\\n                            [readonly]=\\\"!('UpdatePromotion' | hasPermission)\\\"\\r\\n                            type=\\\"text\\\"\\r\\n                            formControlName=\\\"name\\\"\\r\\n                        />\\r\\n                    </vdr-form-field>\\r\\n                    <vdr-rich-text-editor\\r\\n                        class=\\\"form-grid-span\\\"\\r\\n                        formControlName=\\\"description\\\"\\r\\n                        [readonly]=\\\"!('UpdatePromotion' | hasPermission)\\\"\\r\\n                        [label]=\\\"'common.description' | translate\\\"\\r\\n                    ></vdr-rich-text-editor>\\r\\n                    <vdr-form-field [label]=\\\"'marketing.starts-at' | translate\\\" for=\\\"startsAt\\\">\\r\\n                        <vdr-datetime-picker formControlName=\\\"startsAt\\\"></vdr-datetime-picker>\\r\\n                    </vdr-form-field>\\r\\n                    <vdr-form-field [label]=\\\"'marketing.ends-at' | translate\\\" for=\\\"endsAt\\\">\\r\\n                        <vdr-datetime-picker formControlName=\\\"endsAt\\\"></vdr-datetime-picker>\\r\\n                    </vdr-form-field>\\r\\n                    <vdr-form-field [label]=\\\"'marketing.coupon-code' | translate\\\" for=\\\"couponCode\\\">\\r\\n                        <input\\r\\n                            id=\\\"couponCode\\\"\\r\\n                            [readonly]=\\\"!('UpdatePromotion' | hasPermission)\\\"\\r\\n                            type=\\\"text\\\"\\r\\n                            formControlName=\\\"couponCode\\\"\\r\\n                        />\\r\\n                    </vdr-form-field>\\r\\n                    <vdr-form-field\\r\\n                        [label]=\\\"'marketing.per-customer-limit' | translate\\\"\\r\\n                        [tooltip]=\\\"'marketing.per-customer-limit-tooltip' | translate\\\"\\r\\n                        for=\\\"perCustomerUsageLimit\\\"\\r\\n                    >\\r\\n                        <input\\r\\n                            id=\\\"perCustomerUsageLimit\\\"\\r\\n                            [readonly]=\\\"!('UpdatePromotion' | hasPermission)\\\"\\r\\n                            type=\\\"number\\\"\\r\\n                            min=\\\"1\\\"\\r\\n                            max=\\\"999\\\"\\r\\n                            formControlName=\\\"perCustomerUsageLimit\\\"\\r\\n                        />\\r\\n                    </vdr-form-field>\\r\\n                    <vdr-form-field\\r\\n                        [label]=\\\"'marketing.usage-limit' | translate\\\"\\r\\n                        [tooltip]=\\\"'marketing.usage-limit-tooltip' | translate\\\"\\r\\n                        for=\\\"usageLimit\\\"\\r\\n                    >\\r\\n                        <input\\r\\n                            id=\\\"usageLimit\\\"\\r\\n                            [readonly]=\\\"!('UpdatePromotion' | hasPermission)\\\"\\r\\n                            type=\\\"number\\\"\\r\\n                            min=\\\"1\\\"\\r\\n                            max=\\\"9999999\\\"\\r\\n                            formControlName=\\\"usageLimit\\\"\\r\\n                        />\\r\\n                    </vdr-form-field>\\r\\n                </div>\\r\\n            </vdr-card>\\r\\n            <vdr-card\\r\\n                [title]=\\\"'common.custom-fields' | translate\\\"\\r\\n                formGroupName=\\\"customFields\\\"\\r\\n                *ngIf=\\\"customFields.length\\\"\\r\\n            >\\r\\n                <vdr-tabbed-custom-fields\\r\\n                    entityName=\\\"Promotion\\\"\\r\\n                    [customFields]=\\\"customFields\\\"\\r\\n                    [customFieldsFormGroup]=\\\"detailForm.get('customFields')\\\"\\r\\n                    [readonly]=\\\"!('UpdatePromotion' | hasPermission)\\\"\\r\\n                ></vdr-tabbed-custom-fields>\\r\\n            </vdr-card>\\r\\n\\r\\n            <vdr-custom-detail-component-host\\r\\n                locationId=\\\"promotion-detail\\\"\\r\\n                [entity$]=\\\"entity$\\\"\\r\\n                [detailForm]=\\\"detailForm\\\"\\r\\n            ></vdr-custom-detail-component-host>\\r\\n\\r\\n            <vdr-card [title]=\\\"'marketing.conditions' | translate\\\" formArrayName=\\\"conditions\\\">\\r\\n                <div *ngFor=\\\"let condition of conditions; index as i\\\">\\r\\n                    <vdr-configurable-input\\r\\n                        (remove)=\\\"removeCondition($event)\\\"\\r\\n                        [position]=\\\"i\\\"\\r\\n                        [readonly]=\\\"!('UpdatePromotion' | hasPermission)\\\"\\r\\n                        [operation]=\\\"condition\\\"\\r\\n                        [operationDefinition]=\\\"getConditionDefinition(condition)\\\"\\r\\n                        [formControlName]=\\\"i\\\"\\r\\n                    ></vdr-configurable-input>\\r\\n                </div>\\r\\n                <div>\\r\\n                    <vdr-dropdown *vdrIfPermissions=\\\"'UpdatePromotion'\\\">\\r\\n                        <button class=\\\"btn btn-outline\\\" vdrDropdownTrigger>\\r\\n                            <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n                            {{ 'marketing.add-condition' | translate }}\\r\\n                        </button>\\r\\n                        <vdr-dropdown-menu vdrPosition=\\\"bottom-left\\\">\\r\\n                            <button\\r\\n                                *ngFor=\\\"let condition of getAvailableConditions()\\\"\\r\\n                                type=\\\"button\\\"\\r\\n                                vdrDropdownItem\\r\\n                                class=\\\"item-wrap\\\"\\r\\n                                (click)=\\\"addCondition(condition)\\\"\\r\\n                            >\\r\\n                                {{ condition.description }}\\r\\n                            </button>\\r\\n                        </vdr-dropdown-menu>\\r\\n                    </vdr-dropdown>\\r\\n                </div>\\r\\n            </vdr-card>\\r\\n            <vdr-card [title]=\\\"'marketing.actions' | translate\\\" formArrayName=\\\"actions\\\">\\r\\n                <div *ngFor=\\\"let action of actions; index as i\\\">\\r\\n                    <vdr-configurable-input\\r\\n                        (remove)=\\\"removeAction($event)\\\"\\r\\n                        [position]=\\\"i\\\"\\r\\n                        [operation]=\\\"action\\\"\\r\\n                        [readonly]=\\\"!('UpdatePromotion' | hasPermission)\\\"\\r\\n                        [operationDefinition]=\\\"getActionDefinition(action)\\\"\\r\\n                        [formControlName]=\\\"i\\\"\\r\\n                    ></vdr-configurable-input>\\r\\n                </div>\\r\\n                <div>\\r\\n                    <vdr-dropdown *vdrIfPermissions=\\\"'UpdatePromotion'\\\">\\r\\n                        <button class=\\\"btn btn-outline\\\" vdrDropdownTrigger>\\r\\n                            <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n                            {{ 'marketing.add-action' | translate }}\\r\\n                        </button>\\r\\n                        <vdr-dropdown-menu vdrPosition=\\\"bottom-left\\\">\\r\\n                            <button\\r\\n                                *ngFor=\\\"let action of getAvailableActions()\\\"\\r\\n                                type=\\\"button\\\"\\r\\n                                vdrDropdownItem\\r\\n                                class=\\\"item-wrap\\\"\\r\\n                                (click)=\\\"addAction(action)\\\"\\r\\n                            >\\r\\n                                {{ action.description }}\\r\\n                            </button>\\r\\n                        </vdr-dropdown-menu>\\r\\n                    </vdr-dropdown>\\r\\n                </div>\\r\\n            </vdr-card>\\r\\n        </vdr-page-block>\\r\\n    </vdr-page-detail-layout>\\r\\n</form>\\r\\n\", styles: [\".item-wrap{white-space:normal}\\n\"], dependencies: [{ kind: \"directive\", type: i3.ClrIconCustomTag, selector: \"clr-icon\" }, { kind: \"directive\", type: i3.ClrLabel, selector: \"label\", inputs: [\"for\"] }, { kind: \"directive\", type: i3.ClrCheckbox, selector: \"[clrCheckbox],[clrToggle]\" }, { kind: \"component\", type: i3.ClrCheckboxWrapper, selector: \"clr-checkbox-wrapper,clr-toggle-wrapper\" }, { kind: \"directive\", type: i4.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { kind: \"directive\", type: i4.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { kind: \"directive\", type: i2.ɵNgNoValidate, selector: \"form:not([ngNoForm]):not([ngNativeValidate])\" }, { kind: \"directive\", type: i2.DefaultValueAccessor, selector: \"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]\" }, { kind: \"directive\", type: i2.NumberValueAccessor, selector: \"input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]\" }, { kind: \"directive\", type: i2.CheckboxControlValueAccessor, selector: \"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]\" }, { kind: \"directive\", type: i2.NgControlStatus, selector: \"[formControlName],[ngModel],[formControl]\" }, { kind: \"directive\", type: i2.NgControlStatusGroup, selector: \"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]\" }, { kind: \"directive\", type: i2.MinValidator, selector: \"input[type=number][min][formControlName],input[type=number][min][formControl],input[type=number][min][ngModel]\", inputs: [\"min\"] }, { kind: \"directive\", type: i2.MaxValidator, selector: \"input[type=number][max][formControlName],input[type=number][max][formControl],input[type=number][max][ngModel]\", inputs: [\"max\"] }, { kind: \"directive\", type: i2.FormGroupDirective, selector: \"[formGroup]\", inputs: [\"formGroup\"], outputs: [\"ngSubmit\"], exportAs: [\"ngForm\"] }, { kind: \"directive\", type: i2.FormControlName, selector: \"[formControlName]\", inputs: [\"formControlName\", \"disabled\", \"ngModel\"], outputs: [\"ngModelChange\"] }, { kind: \"directive\", type: i2.FormGroupName, selector: \"[formGroupName]\", inputs: [\"formGroupName\"] }, { kind: \"directive\", type: i2.FormArrayName, selector: \"[formArrayName]\", inputs: [\"formArrayName\"] }, { kind: \"component\", type: i1.ActionBarComponent, selector: \"vdr-action-bar\" }, { kind: \"component\", type: i1.ActionBarLeftComponent, selector: \"vdr-ab-left\", inputs: [\"grow\"] }, { kind: \"component\", type: i1.ActionBarRightComponent, selector: \"vdr-ab-right\", inputs: [\"grow\"] }, { kind: \"component\", type: i1.ConfigurableInputComponent, selector: \"vdr-configurable-input\", inputs: [\"operation\", \"operationDefinition\", \"readonly\", \"removable\", \"position\"], outputs: [\"remove\"] }, { kind: \"component\", type: i1.FormFieldComponent, selector: \"vdr-form-field\", inputs: [\"label\", \"for\", \"tooltip\", \"errors\", \"readOnlyToggle\"] }, { kind: \"directive\", type: i1.FormFieldControlDirective, selector: \"input, textarea, select\" }, { kind: \"component\", type: i1.LanguageSelectorComponent, selector: \"vdr-language-selector\", inputs: [\"currentLanguageCode\", \"availableLanguageCodes\", \"disabled\"], outputs: [\"languageCodeChange\"] }, { kind: \"component\", type: i1.RichTextEditorComponent, selector: \"vdr-rich-text-editor\", inputs: [\"label\", \"readonly\"] }, { kind: \"component\", type: i1.DropdownComponent, selector: \"vdr-dropdown\", inputs: [\"manualToggle\"] }, { kind: \"component\", type: i1.DropdownMenuComponent, selector: \"vdr-dropdown-menu\", inputs: [\"vdrPosition\", \"customClasses\"] }, { kind: \"directive\", type: i1.DropdownTriggerDirective, selector: \"[vdrDropdownTrigger]\" }, { kind: \"directive\", type: i1.DropdownItemDirective, selector: \"[vdrDropdownItem]\" }, { kind: \"directive\", type: i1.IfPermissionsDirective, selector: \"[vdrIfPermissions]\", inputs: [\"vdrIfPermissions\", \"vdrIfPermissionsElse\"] }, { kind: \"component\", type: i1.ActionBarItemsComponent, selector: \"vdr-action-bar-items\", inputs: [\"locationId\"] }, { kind: \"component\", type: i1.DatetimePickerComponent, selector: \"vdr-datetime-picker\", inputs: [\"yearRange\", \"weekStartDay\", \"timeGranularityInterval\", \"min\", \"max\", \"readonly\"] }, { kind: \"component\", type: i1.TabbedCustomFieldsComponent, selector: \"vdr-tabbed-custom-fields\", inputs: [\"entityName\", \"customFields\", \"customFieldsFormGroup\", \"readonly\", \"compact\", \"showLabel\"] }, { kind: \"component\", type: i1.CustomDetailComponentHostComponent, selector: \"vdr-custom-detail-component-host\", inputs: [\"locationId\", \"entity$\", \"detailForm\"] }, { kind: \"component\", type: i1.PageBlockComponent, selector: \"vdr-page-block\" }, { kind: \"component\", type: i1.PageEntityInfoComponent, selector: \"vdr-page-entity-info\", inputs: [\"entity\"] }, { kind: \"component\", type: i1.PageDetailLayoutComponent, selector: \"vdr-page-detail-layout\" }, { kind: \"component\", type: i1.PageDetailSidebarComponent, selector: \"vdr-page-detail-sidebar\" }, { kind: \"component\", type: i1.CardComponent, selector: \"vdr-card\", inputs: [\"title\", \"paddingX\"] }, { kind: \"pipe\", type: i4.AsyncPipe, name: \"async\" }, { kind: \"pipe\", type: i5.TranslatePipe, name: \"translate\" }, { kind: \"pipe\", type: i1.HasPermissionPipe, name: \"hasPermission\" }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }\r\n}\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.2\", ngImport: i0, type: PromotionDetailComponent, decorators: [{\r\n            type: Component,\r\n            args: [{ selector: 'vdr-promotion-detail', changeDetection: ChangeDetectionStrategy.OnPush, template: \"<vdr-page-block>\\r\\n    <vdr-action-bar>\\r\\n        <vdr-ab-left>\\r\\n            <div class=\\\"flex clr-align-items-center\\\">\\r\\n                <vdr-language-selector\\r\\n                    [disabled]=\\\"isNew$ | async\\\"\\r\\n                    [availableLanguageCodes]=\\\"availableLanguages$ | async\\\"\\r\\n                    [currentLanguageCode]=\\\"languageCode$ | async\\\"\\r\\n                    (languageCodeChange)=\\\"setLanguage($event)\\\"\\r\\n                ></vdr-language-selector>\\r\\n            </div>\\r\\n        </vdr-ab-left>\\r\\n\\r\\n        <vdr-ab-right>\\r\\n            <vdr-action-bar-items locationId=\\\"promotion-detail\\\"></vdr-action-bar-items>\\r\\n            <button\\r\\n                class=\\\"btn btn-primary\\\"\\r\\n                *ngIf=\\\"isNew$ | async; else updateButton\\\"\\r\\n                (click)=\\\"create()\\\"\\r\\n                [disabled]=\\\"!saveButtonEnabled()\\\"\\r\\n            >\\r\\n                {{ 'common.create' | translate }}\\r\\n            </button>\\r\\n            <ng-template #updateButton>\\r\\n                <button\\r\\n                    class=\\\"btn btn-primary\\\"\\r\\n                    (click)=\\\"save()\\\"\\r\\n                    *vdrIfPermissions=\\\"'UpdatePromotion'\\\"\\r\\n                    [disabled]=\\\"!saveButtonEnabled()\\\"\\r\\n                >\\r\\n                    {{ 'common.update' | translate }}\\r\\n                </button>\\r\\n            </ng-template>\\r\\n        </vdr-ab-right>\\r\\n    </vdr-action-bar>\\r\\n</vdr-page-block>\\r\\n\\r\\n<form class=\\\"form\\\" [formGroup]=\\\"detailForm\\\">\\r\\n    <vdr-page-detail-layout>\\r\\n        <vdr-page-detail-sidebar>\\r\\n            <vdr-card *vdrIfPermissions=\\\"'UpdatePromotion'\\\">\\r\\n                <clr-toggle-wrapper>\\r\\n                    <input type=\\\"checkbox\\\" clrToggle name=\\\"enabled\\\" formControlName=\\\"enabled\\\" />\\r\\n                    <label>{{ 'common.enabled' | translate }}</label>\\r\\n                </clr-toggle-wrapper>\\r\\n            </vdr-card>\\r\\n            <vdr-card *ngIf=\\\"entity$ | async as entity\\\">\\r\\n                <vdr-page-entity-info [entity]=\\\"entity\\\" />\\r\\n            </vdr-card>\\r\\n        </vdr-page-detail-sidebar>\\r\\n        <vdr-page-block>\\r\\n            <vdr-card>\\r\\n                <div class=\\\"form-grid\\\">\\r\\n                    <vdr-form-field [label]=\\\"'common.name' | translate\\\" for=\\\"name\\\">\\r\\n                        <input\\r\\n                            id=\\\"name\\\"\\r\\n                            [readonly]=\\\"!('UpdatePromotion' | hasPermission)\\\"\\r\\n                            type=\\\"text\\\"\\r\\n                            formControlName=\\\"name\\\"\\r\\n                        />\\r\\n                    </vdr-form-field>\\r\\n                    <vdr-rich-text-editor\\r\\n                        class=\\\"form-grid-span\\\"\\r\\n                        formControlName=\\\"description\\\"\\r\\n                        [readonly]=\\\"!('UpdatePromotion' | hasPermission)\\\"\\r\\n                        [label]=\\\"'common.description' | translate\\\"\\r\\n                    ></vdr-rich-text-editor>\\r\\n                    <vdr-form-field [label]=\\\"'marketing.starts-at' | translate\\\" for=\\\"startsAt\\\">\\r\\n                        <vdr-datetime-picker formControlName=\\\"startsAt\\\"></vdr-datetime-picker>\\r\\n                    </vdr-form-field>\\r\\n                    <vdr-form-field [label]=\\\"'marketing.ends-at' | translate\\\" for=\\\"endsAt\\\">\\r\\n                        <vdr-datetime-picker formControlName=\\\"endsAt\\\"></vdr-datetime-picker>\\r\\n                    </vdr-form-field>\\r\\n                    <vdr-form-field [label]=\\\"'marketing.coupon-code' | translate\\\" for=\\\"couponCode\\\">\\r\\n                        <input\\r\\n                            id=\\\"couponCode\\\"\\r\\n                            [readonly]=\\\"!('UpdatePromotion' | hasPermission)\\\"\\r\\n                            type=\\\"text\\\"\\r\\n                            formControlName=\\\"couponCode\\\"\\r\\n                        />\\r\\n                    </vdr-form-field>\\r\\n                    <vdr-form-field\\r\\n                        [label]=\\\"'marketing.per-customer-limit' | translate\\\"\\r\\n                        [tooltip]=\\\"'marketing.per-customer-limit-tooltip' | translate\\\"\\r\\n                        for=\\\"perCustomerUsageLimit\\\"\\r\\n                    >\\r\\n                        <input\\r\\n                            id=\\\"perCustomerUsageLimit\\\"\\r\\n                            [readonly]=\\\"!('UpdatePromotion' | hasPermission)\\\"\\r\\n                            type=\\\"number\\\"\\r\\n                            min=\\\"1\\\"\\r\\n                            max=\\\"999\\\"\\r\\n                            formControlName=\\\"perCustomerUsageLimit\\\"\\r\\n                        />\\r\\n                    </vdr-form-field>\\r\\n                    <vdr-form-field\\r\\n                        [label]=\\\"'marketing.usage-limit' | translate\\\"\\r\\n                        [tooltip]=\\\"'marketing.usage-limit-tooltip' | translate\\\"\\r\\n                        for=\\\"usageLimit\\\"\\r\\n                    >\\r\\n                        <input\\r\\n                            id=\\\"usageLimit\\\"\\r\\n                            [readonly]=\\\"!('UpdatePromotion' | hasPermission)\\\"\\r\\n                            type=\\\"number\\\"\\r\\n                            min=\\\"1\\\"\\r\\n                            max=\\\"9999999\\\"\\r\\n                            formControlName=\\\"usageLimit\\\"\\r\\n                        />\\r\\n                    </vdr-form-field>\\r\\n                </div>\\r\\n            </vdr-card>\\r\\n            <vdr-card\\r\\n                [title]=\\\"'common.custom-fields' | translate\\\"\\r\\n                formGroupName=\\\"customFields\\\"\\r\\n                *ngIf=\\\"customFields.length\\\"\\r\\n            >\\r\\n                <vdr-tabbed-custom-fields\\r\\n                    entityName=\\\"Promotion\\\"\\r\\n                    [customFields]=\\\"customFields\\\"\\r\\n                    [customFieldsFormGroup]=\\\"detailForm.get('customFields')\\\"\\r\\n                    [readonly]=\\\"!('UpdatePromotion' | hasPermission)\\\"\\r\\n                ></vdr-tabbed-custom-fields>\\r\\n            </vdr-card>\\r\\n\\r\\n            <vdr-custom-detail-component-host\\r\\n                locationId=\\\"promotion-detail\\\"\\r\\n                [entity$]=\\\"entity$\\\"\\r\\n                [detailForm]=\\\"detailForm\\\"\\r\\n            ></vdr-custom-detail-component-host>\\r\\n\\r\\n            <vdr-card [title]=\\\"'marketing.conditions' | translate\\\" formArrayName=\\\"conditions\\\">\\r\\n                <div *ngFor=\\\"let condition of conditions; index as i\\\">\\r\\n                    <vdr-configurable-input\\r\\n                        (remove)=\\\"removeCondition($event)\\\"\\r\\n                        [position]=\\\"i\\\"\\r\\n                        [readonly]=\\\"!('UpdatePromotion' | hasPermission)\\\"\\r\\n                        [operation]=\\\"condition\\\"\\r\\n                        [operationDefinition]=\\\"getConditionDefinition(condition)\\\"\\r\\n                        [formControlName]=\\\"i\\\"\\r\\n                    ></vdr-configurable-input>\\r\\n                </div>\\r\\n                <div>\\r\\n                    <vdr-dropdown *vdrIfPermissions=\\\"'UpdatePromotion'\\\">\\r\\n                        <button class=\\\"btn btn-outline\\\" vdrDropdownTrigger>\\r\\n                            <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n                            {{ 'marketing.add-condition' | translate }}\\r\\n                        </button>\\r\\n                        <vdr-dropdown-menu vdrPosition=\\\"bottom-left\\\">\\r\\n                            <button\\r\\n                                *ngFor=\\\"let condition of getAvailableConditions()\\\"\\r\\n                                type=\\\"button\\\"\\r\\n                                vdrDropdownItem\\r\\n                                class=\\\"item-wrap\\\"\\r\\n                                (click)=\\\"addCondition(condition)\\\"\\r\\n                            >\\r\\n                                {{ condition.description }}\\r\\n                            </button>\\r\\n                        </vdr-dropdown-menu>\\r\\n                    </vdr-dropdown>\\r\\n                </div>\\r\\n            </vdr-card>\\r\\n            <vdr-card [title]=\\\"'marketing.actions' | translate\\\" formArrayName=\\\"actions\\\">\\r\\n                <div *ngFor=\\\"let action of actions; index as i\\\">\\r\\n                    <vdr-configurable-input\\r\\n                        (remove)=\\\"removeAction($event)\\\"\\r\\n                        [position]=\\\"i\\\"\\r\\n                        [operation]=\\\"action\\\"\\r\\n                        [readonly]=\\\"!('UpdatePromotion' | hasPermission)\\\"\\r\\n                        [operationDefinition]=\\\"getActionDefinition(action)\\\"\\r\\n                        [formControlName]=\\\"i\\\"\\r\\n                    ></vdr-configurable-input>\\r\\n                </div>\\r\\n                <div>\\r\\n                    <vdr-dropdown *vdrIfPermissions=\\\"'UpdatePromotion'\\\">\\r\\n                        <button class=\\\"btn btn-outline\\\" vdrDropdownTrigger>\\r\\n                            <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n                            {{ 'marketing.add-action' | translate }}\\r\\n                        </button>\\r\\n                        <vdr-dropdown-menu vdrPosition=\\\"bottom-left\\\">\\r\\n                            <button\\r\\n                                *ngFor=\\\"let action of getAvailableActions()\\\"\\r\\n                                type=\\\"button\\\"\\r\\n                                vdrDropdownItem\\r\\n                                class=\\\"item-wrap\\\"\\r\\n                                (click)=\\\"addAction(action)\\\"\\r\\n                            >\\r\\n                                {{ action.description }}\\r\\n                            </button>\\r\\n                        </vdr-dropdown-menu>\\r\\n                    </vdr-dropdown>\\r\\n                </div>\\r\\n            </vdr-card>\\r\\n        </vdr-page-block>\\r\\n    </vdr-page-detail-layout>\\r\\n</form>\\r\\n\", styles: [\".item-wrap{white-space:normal}\\n\"] }]\r\n        }], ctorParameters: function () { return [{ type: i0.ChangeDetectorRef }, { type: i1.DataService }, { type: i2.FormBuilder }, { type: i1.NotificationService }]; } });\n\nconst ASSIGN_PROMOTIONS_TO_CHANNEL = gql `\r\n    mutation AssignPromotionsToChannel($input: AssignPromotionsToChannelInput!) {\r\n        assignPromotionsToChannel(input: $input) {\r\n            id\r\n            name\r\n        }\r\n    }\r\n`;\r\nconst REMOVE_PROMOTIONS_FROM_CHANNEL = gql `\r\n    mutation RemovePromotionsFromChannel($input: RemovePromotionsFromChannelInput!) {\r\n        removePromotionsFromChannel(input: $input) {\r\n            id\r\n            name\r\n        }\r\n    }\r\n`;\r\nconst deletePromotionsBulkAction = createBulkDeleteAction({\r\n    location: 'promotion-list',\r\n    requiresPermission: Permission.DeletePromotion,\r\n    getItemName: item => item.name,\r\n    bulkDelete: (dataService, ids) => dataService.promotion.deletePromotions(ids).pipe(map(res => res.deletePromotions)),\r\n});\r\nconst assignPromotionsToChannelBulkAction = createBulkAssignToChannelAction({\r\n    location: 'promotion-list',\r\n    requiresPermission: Permission.UpdatePromotion,\r\n    getItemName: item => item.name,\r\n    bulkAssignToChannel: (dataService, promotionIds, channelId) => dataService\r\n        .mutate(AssignPromotionsToChannelDocument, {\r\n        input: {\r\n            channelId,\r\n            promotionIds,\r\n        },\r\n    })\r\n        .pipe(map(res => res.assignPromotionsToChannel)),\r\n});\r\nconst removePromotionsFromChannelBulkAction = createBulkRemoveFromChannelAction({\r\n    location: 'promotion-list',\r\n    requiresPermission: Permission.DeleteCatalog,\r\n    getItemName: item => item.name,\r\n    bulkRemoveFromChannel: (dataService, promotionIds, channelId) => dataService\r\n        .mutate(RemovePromotionsFromChannelDocument, {\r\n        input: {\r\n            channelId,\r\n            promotionIds,\r\n        },\r\n    })\r\n        .pipe(map(res => res.removePromotionsFromChannel)),\r\n});\n\nconst GET_PROMOTION_LIST = gql `\r\n    query GetPromotionList($options: PromotionListOptions) {\r\n        promotions(options: $options) {\r\n            items {\r\n                ...Promotion\r\n            }\r\n            totalItems\r\n        }\r\n    }\r\n    ${PROMOTION_FRAGMENT}\r\n`;\r\nclass PromotionListComponent extends TypedBaseListComponent {\r\n    constructor() {\r\n        super();\r\n        this.customFields = this.getCustomFieldConfig('Promotion');\r\n        this.filters = this.createFilterCollection()\r\n            .addIdFilter()\r\n            .addDateFilters()\r\n            .addFilters([\r\n            {\r\n                name: 'startsAt',\r\n                type: { kind: 'dateRange' },\r\n                label: marker('marketing.starts-at'),\r\n                filterField: 'startsAt',\r\n            },\r\n            {\r\n                name: 'endsAt',\r\n                type: { kind: 'dateRange' },\r\n                label: marker('marketing.ends-at'),\r\n                filterField: 'endsAt',\r\n            },\r\n            {\r\n                name: 'enabled',\r\n                type: { kind: 'boolean' },\r\n                label: marker('common.enabled'),\r\n                filterField: 'enabled',\r\n            },\r\n            {\r\n                name: 'name',\r\n                type: { kind: 'text' },\r\n                label: marker('common.name'),\r\n                filterField: 'name',\r\n            },\r\n            {\r\n                name: 'couponCode',\r\n                type: { kind: 'text' },\r\n                label: marker('marketing.coupon-code'),\r\n                filterField: 'couponCode',\r\n            },\r\n            {\r\n                name: 'desc',\r\n                type: { kind: 'text' },\r\n                label: marker('common.description'),\r\n                filterField: 'description',\r\n            },\r\n            {\r\n                name: 'perCustomerUsageLimit',\r\n                type: { kind: 'number' },\r\n                label: marker('marketing.per-customer-limit'),\r\n                filterField: 'perCustomerUsageLimit',\r\n            },\r\n            {\r\n                name: 'usageLimit',\r\n                type: { kind: 'number' },\r\n                label: marker('marketing.usage-limit'),\r\n                filterField: 'usageLimit',\r\n            },\r\n        ])\r\n            .addCustomFieldFilters(this.customFields)\r\n            .connectToRoute(this.route);\r\n        this.sorts = this.createSortCollection()\r\n            .defaultSort('createdAt', 'DESC')\r\n            .addSorts([\r\n            { name: 'createdAt' },\r\n            { name: 'updatedAt' },\r\n            { name: 'startsAt' },\r\n            { name: 'endsAt' },\r\n            { name: 'name' },\r\n            { name: 'couponCode' },\r\n            { name: 'perCustomerUsageLimit' },\r\n            { name: 'usageLimit' },\r\n        ])\r\n            .addCustomFieldSorts(this.customFields)\r\n            .connectToRoute(this.route);\r\n        super.configure({\r\n            document: GetPromotionListDocument,\r\n            getItems: data => data.promotions,\r\n            setVariables: (skip, take) => this.createQueryOptions(skip, take, this.searchTermControl.value),\r\n            refreshListOnChanges: [this.filters.valueChanges, this.sorts.valueChanges],\r\n        });\r\n    }\r\n    createQueryOptions(skip, take, searchTerm) {\r\n        const filter = this.filters.createFilterInput();\r\n        const sort = this.sorts.createSortInput();\r\n        let filterOperator = LogicalOperator.AND;\r\n        if (searchTerm) {\r\n            filter.couponCode = { contains: searchTerm };\r\n            filter.name = { contains: searchTerm };\r\n            filterOperator = LogicalOperator.OR;\r\n        }\r\n        return {\r\n            options: {\r\n                skip,\r\n                take,\r\n                filter,\r\n                filterOperator,\r\n                sort,\r\n            },\r\n        };\r\n    }\r\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.2\", ngImport: i0, type: PromotionListComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }\r\n    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"16.2.2\", type: PromotionListComponent, selector: \"vdr-promotion-list\", usesInheritance: true, ngImport: i0, template: \"<vdr-page-block>\\r\\n    <vdr-action-bar>\\r\\n        <vdr-ab-left>\\r\\n            <vdr-language-selector\\r\\n                   [availableLanguageCodes]=\\\"availableLanguages$ | async\\\"\\r\\n                   [currentLanguageCode]=\\\"contentLanguage$ | async\\\"\\r\\n                   (languageCodeChange)=\\\"setLanguage($event)\\\"\\r\\n               ></vdr-language-selector>\\r\\n        </vdr-ab-left>\\r\\n        <vdr-ab-right>\\r\\n            <vdr-action-bar-items locationId=\\\"promotion-list\\\"></vdr-action-bar-items>\\r\\n            <a class=\\\"btn btn-primary\\\" [routerLink]=\\\"['./create']\\\" *vdrIfPermissions=\\\"'CreatePromotion'\\\">\\r\\n                <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n                {{ 'marketing.create-new-promotion' | translate }}\\r\\n            </a>\\r\\n        </vdr-ab-right>\\r\\n    </vdr-action-bar>\\r\\n</vdr-page-block>\\r\\n\\r\\n<vdr-data-table-2\\r\\n    id=\\\"promotion-list\\\"\\r\\n    [items]=\\\"items$ | async\\\"\\r\\n    [itemsPerPage]=\\\"itemsPerPage$ | async\\\"\\r\\n    [totalItems]=\\\"totalItems$ | async\\\"\\r\\n    [currentPage]=\\\"currentPage$ | async\\\"\\r\\n    [filters]=\\\"filters\\\"\\r\\n    (pageChange)=\\\"setPageNumber($event)\\\"\\r\\n    (itemsPerPageChange)=\\\"setItemsPerPage($event)\\\"\\r\\n>\\r\\n    <vdr-bulk-action-menu\\r\\n        locationId=\\\"promotion-list\\\"\\r\\n        [hostComponent]=\\\"this\\\"\\r\\n        [selectionManager]=\\\"selectionManager\\\"\\r\\n    />\\r\\n    <vdr-dt2-search\\r\\n        [searchTermControl]=\\\"searchTermControl\\\"\\r\\n        [searchTermPlaceholder]=\\\"'marketing.search-by-name-or-coupon-code' | translate\\\"\\r\\n    />\\r\\n    <vdr-dt2-column [heading]=\\\"'common.id' | translate\\\" id=\\\"id\\\" [hiddenByDefault]=\\\"true\\\">\\r\\n        <ng-template let-promotion=\\\"item\\\">{{ promotion.id }}</ng-template>\\r\\n    </vdr-dt2-column>\\r\\n    <vdr-dt2-column\\r\\n        [heading]=\\\"'common.created-at' | translate\\\" id=\\\"created-at\\\"\\r\\n        [hiddenByDefault]=\\\"true\\\"\\r\\n        [sort]=\\\"sorts.get('createdAt')\\\"\\r\\n    >\\r\\n        <ng-template let-promotion=\\\"item\\\">\\r\\n            {{ promotion.createdAt | localeDate : 'short' }}\\r\\n        </ng-template>\\r\\n    </vdr-dt2-column>\\r\\n    <vdr-dt2-column\\r\\n        [heading]=\\\"'common.updated-at' | translate\\\" id=\\\"updated-at\\\"\\r\\n        [hiddenByDefault]=\\\"true\\\"\\r\\n        [sort]=\\\"sorts.get('updatedAt')\\\"\\r\\n    >\\r\\n        <ng-template let-promotion=\\\"item\\\">\\r\\n            {{ promotion.updatedAt | localeDate : 'short' }}\\r\\n        </ng-template>\\r\\n    </vdr-dt2-column>\\r\\n    <vdr-dt2-column [heading]=\\\"'common.name' | translate\\\" id=\\\"name\\\" [optional]=\\\"false\\\" [sort]=\\\"sorts.get('name')\\\">\\r\\n        <ng-template let-promotion=\\\"item\\\">\\r\\n            <a class=\\\"button-ghost\\\" [routerLink]=\\\"['./', promotion.id]\\\"\\r\\n                ><span> {{ promotion.name }}</span>\\r\\n                <clr-icon shape=\\\"arrow right\\\"></clr-icon>\\r\\n            </a>\\r\\n        </ng-template>\\r\\n    </vdr-dt2-column>\\r\\n    <vdr-dt2-column [heading]=\\\"'common.enabled' | translate\\\" id=\\\"enabled\\\">\\r\\n        <ng-template let-promotion=\\\"item\\\">\\r\\n            <vdr-chip *ngIf=\\\"promotion.enabled\\\" colorType=\\\"success\\\">{{\\r\\n                'common.enabled' | translate\\r\\n            }}</vdr-chip>\\r\\n            <vdr-chip *ngIf=\\\"!promotion.enabled\\\" colorType=\\\"warning\\\">{{\\r\\n                'common.disabled' | translate\\r\\n            }}</vdr-chip>\\r\\n        </ng-template>\\r\\n    </vdr-dt2-column>\\r\\n    <vdr-dt2-column [heading]=\\\"'marketing.coupon-code' | translate\\\" id=\\\"coupon-code\\\" [sort]=\\\"sorts.get('couponCode')\\\">\\r\\n        <ng-template let-promotion=\\\"item\\\">\\r\\n            {{ promotion.couponCode }}\\r\\n        </ng-template>\\r\\n    </vdr-dt2-column>\\r\\n    <vdr-dt2-column [heading]=\\\"'marketing.starts-at' | translate\\\" id=\\\"starts-at\\\" [sort]=\\\"sorts.get('startsAt')\\\">\\r\\n        <ng-template let-promotion=\\\"item\\\">\\r\\n            {{ promotion.startsAt | localeDate : 'short' }}\\r\\n        </ng-template>\\r\\n    </vdr-dt2-column>\\r\\n    <vdr-dt2-column [heading]=\\\"'marketing.ends-at' | translate\\\" id=\\\"ends-at\\\" [sort]=\\\"sorts.get('endsAt')\\\">\\r\\n        <ng-template let-promotion=\\\"item\\\">\\r\\n            {{ promotion.endsAt | localeDate : 'short' }}\\r\\n        </ng-template>\\r\\n    </vdr-dt2-column>\\r\\n    <vdr-dt2-column\\r\\n        [heading]=\\\"'marketing.per-customer-limit' | translate\\\" id=\\\"per-customer-limit\\\"\\r\\n        [sort]=\\\"sorts.get('perCustomerUsageLimit')\\\"\\r\\n        [hiddenByDefault]=\\\"true\\\"\\r\\n    >\\r\\n        <ng-template let-promotion=\\\"item\\\">\\r\\n            {{ promotion.perCustomerUsageLimit }}\\r\\n        </ng-template>\\r\\n    </vdr-dt2-column>\\r\\n    <vdr-dt2-column\\r\\n        [heading]=\\\"'marketing.per-customer-limit' | translate\\\" id=\\\"per-customer-limit\\\"\\r\\n        [sort]=\\\"sorts.get('usageLimit')\\\"\\r\\n        [hiddenByDefault]=\\\"true\\\"\\r\\n    >\\r\\n        <ng-template let-promotion=\\\"item\\\">\\r\\n            {{ promotion.usageLimit }}\\r\\n        </ng-template>\\r\\n    </vdr-dt2-column>\\r\\n    <vdr-dt2-custom-field-column *ngFor=\\\"let customField of customFields\\\" [customField]=\\\"customField\\\" [sorts]=\\\"sorts\\\" />\\r\\n</vdr-data-table-2>\\r\\n\", styles: [\".search-form{padding:0}.search-input{margin:6px 8px 0 0;min-width:200px}\\n\"], dependencies: [{ kind: \"directive\", type: i3.ClrIconCustomTag, selector: \"clr-icon\" }, { kind: \"directive\", type: i4.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { kind: \"directive\", type: i4.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { kind: \"directive\", type: i3$1.RouterLink, selector: \"[routerLink]\", inputs: [\"target\", \"queryParams\", \"fragment\", \"queryParamsHandling\", \"state\", \"relativeTo\", \"preserveFragment\", \"skipLocationChange\", \"replaceUrl\", \"routerLink\"] }, { kind: \"component\", type: i1.ActionBarComponent, selector: \"vdr-action-bar\" }, { kind: \"component\", type: i1.ActionBarLeftComponent, selector: \"vdr-ab-left\", inputs: [\"grow\"] }, { kind: \"component\", type: i1.ActionBarRightComponent, selector: \"vdr-ab-right\", inputs: [\"grow\"] }, { kind: \"component\", type: i1.ChipComponent, selector: \"vdr-chip\", inputs: [\"icon\", \"invert\", \"colorFrom\", \"colorType\"], outputs: [\"iconClick\"] }, { kind: \"component\", type: i1.LanguageSelectorComponent, selector: \"vdr-language-selector\", inputs: [\"currentLanguageCode\", \"availableLanguageCodes\", \"disabled\"], outputs: [\"languageCodeChange\"] }, { kind: \"directive\", type: i1.IfPermissionsDirective, selector: \"[vdrIfPermissions]\", inputs: [\"vdrIfPermissions\", \"vdrIfPermissionsElse\"] }, { kind: \"component\", type: i1.ActionBarItemsComponent, selector: \"vdr-action-bar-items\", inputs: [\"locationId\"] }, { kind: \"component\", type: i1.BulkActionMenuComponent, selector: \"vdr-bulk-action-menu\", inputs: [\"locationId\", \"selectionManager\", \"hostComponent\"] }, { kind: \"component\", type: i1.DataTable2Component, selector: \"vdr-data-table-2\", inputs: [\"id\", \"items\", \"itemsPerPage\", \"currentPage\", \"totalItems\", \"emptyStateLabel\", \"filters\", \"activeIndex\"], outputs: [\"pageChange\", \"itemsPerPageChange\"] }, { kind: \"component\", type: i1.DataTable2ColumnComponent, selector: \"vdr-dt2-column\", inputs: [\"id\", \"expand\", \"heading\", \"align\", \"sort\", \"optional\", \"hiddenByDefault\", \"orderable\"], exportAs: [\"row\"] }, { kind: \"component\", type: i1.DataTable2SearchComponent, selector: \"vdr-dt2-search\", inputs: [\"searchTermControl\", \"searchTermPlaceholder\"] }, { kind: \"component\", type: i1.DataTableCustomFieldColumnComponent, selector: \"vdr-dt2-custom-field-column\", inputs: [\"customField\", \"sorts\"], exportAs: [\"row\"] }, { kind: \"component\", type: i1.PageBlockComponent, selector: \"vdr-page-block\" }, { kind: \"pipe\", type: i4.AsyncPipe, name: \"async\" }, { kind: \"pipe\", type: i5.TranslatePipe, name: \"translate\" }, { kind: \"pipe\", type: i1.LocaleDatePipe, name: \"localeDate\" }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }\r\n}\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.2\", ngImport: i0, type: PromotionListComponent, decorators: [{\r\n            type: Component,\r\n            args: [{ selector: 'vdr-promotion-list', changeDetection: ChangeDetectionStrategy.OnPush, template: \"<vdr-page-block>\\r\\n    <vdr-action-bar>\\r\\n        <vdr-ab-left>\\r\\n            <vdr-language-selector\\r\\n                   [availableLanguageCodes]=\\\"availableLanguages$ | async\\\"\\r\\n                   [currentLanguageCode]=\\\"contentLanguage$ | async\\\"\\r\\n                   (languageCodeChange)=\\\"setLanguage($event)\\\"\\r\\n               ></vdr-language-selector>\\r\\n        </vdr-ab-left>\\r\\n        <vdr-ab-right>\\r\\n            <vdr-action-bar-items locationId=\\\"promotion-list\\\"></vdr-action-bar-items>\\r\\n            <a class=\\\"btn btn-primary\\\" [routerLink]=\\\"['./create']\\\" *vdrIfPermissions=\\\"'CreatePromotion'\\\">\\r\\n                <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n                {{ 'marketing.create-new-promotion' | translate }}\\r\\n            </a>\\r\\n        </vdr-ab-right>\\r\\n    </vdr-action-bar>\\r\\n</vdr-page-block>\\r\\n\\r\\n<vdr-data-table-2\\r\\n    id=\\\"promotion-list\\\"\\r\\n    [items]=\\\"items$ | async\\\"\\r\\n    [itemsPerPage]=\\\"itemsPerPage$ | async\\\"\\r\\n    [totalItems]=\\\"totalItems$ | async\\\"\\r\\n    [currentPage]=\\\"currentPage$ | async\\\"\\r\\n    [filters]=\\\"filters\\\"\\r\\n    (pageChange)=\\\"setPageNumber($event)\\\"\\r\\n    (itemsPerPageChange)=\\\"setItemsPerPage($event)\\\"\\r\\n>\\r\\n    <vdr-bulk-action-menu\\r\\n        locationId=\\\"promotion-list\\\"\\r\\n        [hostComponent]=\\\"this\\\"\\r\\n        [selectionManager]=\\\"selectionManager\\\"\\r\\n    />\\r\\n    <vdr-dt2-search\\r\\n        [searchTermControl]=\\\"searchTermControl\\\"\\r\\n        [searchTermPlaceholder]=\\\"'marketing.search-by-name-or-coupon-code' | translate\\\"\\r\\n    />\\r\\n    <vdr-dt2-column [heading]=\\\"'common.id' | translate\\\" id=\\\"id\\\" [hiddenByDefault]=\\\"true\\\">\\r\\n        <ng-template let-promotion=\\\"item\\\">{{ promotion.id }}</ng-template>\\r\\n    </vdr-dt2-column>\\r\\n    <vdr-dt2-column\\r\\n        [heading]=\\\"'common.created-at' | translate\\\" id=\\\"created-at\\\"\\r\\n        [hiddenByDefault]=\\\"true\\\"\\r\\n        [sort]=\\\"sorts.get('createdAt')\\\"\\r\\n    >\\r\\n        <ng-template let-promotion=\\\"item\\\">\\r\\n            {{ promotion.createdAt | localeDate : 'short' }}\\r\\n        </ng-template>\\r\\n    </vdr-dt2-column>\\r\\n    <vdr-dt2-column\\r\\n        [heading]=\\\"'common.updated-at' | translate\\\" id=\\\"updated-at\\\"\\r\\n        [hiddenByDefault]=\\\"true\\\"\\r\\n        [sort]=\\\"sorts.get('updatedAt')\\\"\\r\\n    >\\r\\n        <ng-template let-promotion=\\\"item\\\">\\r\\n            {{ promotion.updatedAt | localeDate : 'short' }}\\r\\n        </ng-template>\\r\\n    </vdr-dt2-column>\\r\\n    <vdr-dt2-column [heading]=\\\"'common.name' | translate\\\" id=\\\"name\\\" [optional]=\\\"false\\\" [sort]=\\\"sorts.get('name')\\\">\\r\\n        <ng-template let-promotion=\\\"item\\\">\\r\\n            <a class=\\\"button-ghost\\\" [routerLink]=\\\"['./', promotion.id]\\\"\\r\\n                ><span> {{ promotion.name }}</span>\\r\\n                <clr-icon shape=\\\"arrow right\\\"></clr-icon>\\r\\n            </a>\\r\\n        </ng-template>\\r\\n    </vdr-dt2-column>\\r\\n    <vdr-dt2-column [heading]=\\\"'common.enabled' | translate\\\" id=\\\"enabled\\\">\\r\\n        <ng-template let-promotion=\\\"item\\\">\\r\\n            <vdr-chip *ngIf=\\\"promotion.enabled\\\" colorType=\\\"success\\\">{{\\r\\n                'common.enabled' | translate\\r\\n            }}</vdr-chip>\\r\\n            <vdr-chip *ngIf=\\\"!promotion.enabled\\\" colorType=\\\"warning\\\">{{\\r\\n                'common.disabled' | translate\\r\\n            }}</vdr-chip>\\r\\n        </ng-template>\\r\\n    </vdr-dt2-column>\\r\\n    <vdr-dt2-column [heading]=\\\"'marketing.coupon-code' | translate\\\" id=\\\"coupon-code\\\" [sort]=\\\"sorts.get('couponCode')\\\">\\r\\n        <ng-template let-promotion=\\\"item\\\">\\r\\n            {{ promotion.couponCode }}\\r\\n        </ng-template>\\r\\n    </vdr-dt2-column>\\r\\n    <vdr-dt2-column [heading]=\\\"'marketing.starts-at' | translate\\\" id=\\\"starts-at\\\" [sort]=\\\"sorts.get('startsAt')\\\">\\r\\n        <ng-template let-promotion=\\\"item\\\">\\r\\n            {{ promotion.startsAt | localeDate : 'short' }}\\r\\n        </ng-template>\\r\\n    </vdr-dt2-column>\\r\\n    <vdr-dt2-column [heading]=\\\"'marketing.ends-at' | translate\\\" id=\\\"ends-at\\\" [sort]=\\\"sorts.get('endsAt')\\\">\\r\\n        <ng-template let-promotion=\\\"item\\\">\\r\\n            {{ promotion.endsAt | localeDate : 'short' }}\\r\\n        </ng-template>\\r\\n    </vdr-dt2-column>\\r\\n    <vdr-dt2-column\\r\\n        [heading]=\\\"'marketing.per-customer-limit' | translate\\\" id=\\\"per-customer-limit\\\"\\r\\n        [sort]=\\\"sorts.get('perCustomerUsageLimit')\\\"\\r\\n        [hiddenByDefault]=\\\"true\\\"\\r\\n    >\\r\\n        <ng-template let-promotion=\\\"item\\\">\\r\\n            {{ promotion.perCustomerUsageLimit }}\\r\\n        </ng-template>\\r\\n    </vdr-dt2-column>\\r\\n    <vdr-dt2-column\\r\\n        [heading]=\\\"'marketing.per-customer-limit' | translate\\\" id=\\\"per-customer-limit\\\"\\r\\n        [sort]=\\\"sorts.get('usageLimit')\\\"\\r\\n        [hiddenByDefault]=\\\"true\\\"\\r\\n    >\\r\\n        <ng-template let-promotion=\\\"item\\\">\\r\\n            {{ promotion.usageLimit }}\\r\\n        </ng-template>\\r\\n    </vdr-dt2-column>\\r\\n    <vdr-dt2-custom-field-column *ngFor=\\\"let customField of customFields\\\" [customField]=\\\"customField\\\" [sorts]=\\\"sorts\\\" />\\r\\n</vdr-data-table-2>\\r\\n\", styles: [\".search-form{padding:0}.search-input{margin:6px 8px 0 0;min-width:200px}\\n\"] }]\r\n        }], ctorParameters: function () { return []; } });\n\nconst createRoutes = (pageService) => [\r\n    {\r\n        path: 'promotions',\r\n        component: PageComponent,\r\n        data: {\r\n            locationId: 'promotion-list',\r\n            breadcrumb: marker('breadcrumb.promotions'),\r\n        },\r\n        children: pageService.getPageTabRoutes('promotion-list'),\r\n    },\r\n    {\r\n        path: 'promotions/:id',\r\n        component: PageComponent,\r\n        data: {\r\n            locationId: 'promotion-detail',\r\n            breadcrumb: { label: marker('breadcrumb.promotions'), link: ['../', 'promotions'] },\r\n        },\r\n        children: pageService.getPageTabRoutes('promotion-detail'),\r\n    },\r\n];\r\nfunction promotionBreadcrumb(data, params) {\r\n    return detailBreadcrumb({\r\n        entity: data.entity,\r\n        id: params.id,\r\n        breadcrumbKey: 'breadcrumb.promotions',\r\n        getName: promotion => promotion.name,\r\n        route: 'promotions',\r\n    });\r\n}\n\nclass MarketingModule {\r\n    static { this.hasRegisteredTabsAndBulkActions = false; }\r\n    constructor(bulkActionRegistryService, pageService) {\r\n        if (MarketingModule.hasRegisteredTabsAndBulkActions) {\r\n            return;\r\n        }\r\n        bulkActionRegistryService.registerBulkAction(assignPromotionsToChannelBulkAction);\r\n        bulkActionRegistryService.registerBulkAction(removePromotionsFromChannelBulkAction);\r\n        bulkActionRegistryService.registerBulkAction(deletePromotionsBulkAction);\r\n        pageService.registerPageTab({\r\n            priority: 0,\r\n            location: 'promotion-list',\r\n            tab: marker('breadcrumb.promotions'),\r\n            route: '',\r\n            component: PromotionListComponent,\r\n        });\r\n        pageService.registerPageTab({\r\n            priority: 0,\r\n            location: 'promotion-detail',\r\n            tab: marker('marketing.promotion'),\r\n            route: '',\r\n            component: detailComponentWithResolver({\r\n                component: PromotionDetailComponent,\r\n                query: GetPromotionDetailDocument,\r\n                entityKey: 'promotion',\r\n                getBreadcrumbs: entity => [\r\n                    {\r\n                        label: entity ? entity.name : marker('marketing.create-new-promotion'),\r\n                        link: [entity?.id],\r\n                    },\r\n                ],\r\n            }),\r\n        });\r\n        MarketingModule.hasRegisteredTabsAndBulkActions = true;\r\n    }\r\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.2\", ngImport: i0, type: MarketingModule, deps: [{ token: i1.BulkActionRegistryService }, { token: i1.PageService }], target: i0.ɵɵFactoryTarget.NgModule }); }\r\n    static { this.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"16.2.2\", ngImport: i0, type: MarketingModule, declarations: [PromotionListComponent, PromotionDetailComponent], imports: [SharedModule, i3$1.RouterModule, SharedModule, AsyncPipe, SharedModule] }); }\r\n    static { this.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"16.2.2\", ngImport: i0, type: MarketingModule, providers: [\r\n            {\r\n                provide: ROUTES,\r\n                useFactory: (pageService) => createRoutes(pageService),\r\n                multi: true,\r\n                deps: [PageService],\r\n            },\r\n        ], imports: [SharedModule, RouterModule.forChild([]), SharedModule, SharedModule] }); }\r\n}\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.2\", ngImport: i0, type: MarketingModule, decorators: [{\r\n            type: NgModule,\r\n            args: [{\r\n                    imports: [SharedModule, RouterModule.forChild([]), SharedModule, AsyncPipe, SharedModule],\r\n                    providers: [\r\n                        {\r\n                            provide: ROUTES,\r\n                            useFactory: (pageService) => createRoutes(pageService),\r\n                            multi: true,\r\n                            deps: [PageService],\r\n                        },\r\n                    ],\r\n                    declarations: [PromotionListComponent, PromotionDetailComponent],\r\n                }]\r\n        }], ctorParameters: function () { return [{ type: i1.BulkActionRegistryService }, { type: i1.PageService }]; } });\n\n// This file was generated by the build-public-api.ts script\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\nexport { GET_PROMOTION_DETAIL, GET_PROMOTION_LIST, MarketingModule, PromotionDetailComponent, PromotionListComponent, assignPromotionsToChannelBulkAction, createRoutes, deletePromotionsBulkAction, promotionBreadcrumb, removePromotionsFromChannelBulkAction };\n"],"x_google_ignoreList":[0]}